# MeowziQ 楽曲データ記述仕様

---
## 共通事項
+ 楽曲データはJSONファイルで提供されます
+ 制御文字について
    + '[ ]' で区切られた範囲を1小節とみなします 
    + '|' で区切られた範囲を1拍とみなします

---
## 記述フォーマット
+ jsonc で記述します [※参考](https://lab.syncer.jp/Tool/JSON-Viewer/)

---
## Pattern 記述仕様
+ オブジェクト定義のプリフィックスを '"pattern' とします
+ 楽曲キーに対する度数をローマ数字(I,Vを利用)で記述します
    ```jsonc
    // パターン
    {
        "pattern": [
            {
                "name": "intro",
                "data": "[I | | | ][IV| | | ][I| | | ][IV| | | ]"
            },
            {
                "name": "verse1",
                "data": "[I | | | ][VI| | | ][VI| | | ][VII| | | ]"
            },
            {
                "name": "chorus1",
                "data": "[IV | | | ][IV| | | ][V| | | ][VII| | | ]"
            }
        ]
    }
    ```

※度数に対する旋法を指定する場合  
```
"[I:Dor| | | ][VI:Mix| | | ][VI| | | ][VII| | | ]"
```
※1小節内では度数の指定は必須です  
```
NG: "[I| | | ][ | | | ][ | | | ][ | | | ]"
OK: "[I| | | ][I| | | ][I| | | ][I| | | ]"
```
※度数指定がない場合 | と |、] の間に半角空白が必要です  

---
## Phrase 記述仕様
+ オブジェクト定義のプリフィックスを 'phrase' とします
+ パターンの記述例
    ```jsonc
    {
        "phrase": [
            {
                "type": "drum",
                "name": "verse1",
                "data": {
                    "inst": [
                        "Crash_Cymbal_1",
                        "Closed_Hi_hat",
                        "Open_Hi_hat",
                        "Electric_Snare",
                        "Electric_Bass_Drum"
                    ],
                    "note": [
                        "[----|----|----|----][----|----|----|----][----|----|----|----][----|----|----|--x-]",
                        "[x-x-|x-x-|x-x-|x---][x-x-|x-x-|x-x-|x---][xxxx|xxxx|xxxx|xx--][xxxx|xxxx|xxxx|xx--]",
                        "[----|----|----|--x-][----|----|----|--x-][----|----|----|--x-][----|----|----|--x-]",
                        "[----|x---|----|x---][----|x---|----|x---][----|x---|----|x---][----|x---|----|x---]",
                        "[x---|---x|x---|----][x---|---x|x---|----][x---|---x|x---|----][x---|---x|x---|----]"
                    ]
                }
            },
            {
                "type": "bass",
                "name": "verse1",
                "note": "[1-1-|3-3-|5-5-|7-7-][1-1-|3-3-|5-5-|7-7-][1-11|3-33|5-55|3-33][1-11|3-33|5-55|7-77]"
            },
            {
                "type": "seque",
                "name": "verse1",
                "data": {
                    "note": [
                        "[1>>>|>>--|----|----][1111|----|----|----][1>>>|>>--|----|----][1111|----|----|----]",
                        "[3>>>|>>--|----|----][----|----|----|----][3>>>|>>--|----|----][----|----|----|----]",
                        "[5>>>|>>--|----|----][5555|----|----|----][5>>>|>>--|----|----][5555|----|----|----]"
                    ]
                }
            }
        ]
    }
    ```

---
## Song 記述仕様
+ オブジェクト定義のプリフィックスを 'song' とします
+ 楽曲の記述例
    ```jsonc
    // ソング
    {
        "song":{
            "name":"song-demo",
            "tempo":"120",
            "key":"C",
            "mode":"Aeo",
            "pattern":[
                "intro",
                "verse1",
                "verse1",
                "chorus1",
                "chorus1",
                "outro"
            ]
        }
    }
    ```

---
## Player 記述仕様
+ オブジェクト定義のプリフィックスを 'player' とします
+ Player の記述例
    ```jsonc
    // プレイヤー
    {
        "player": [
            {
                "type": "drum",
                "midi": "9"
            },
            {
                "type": "bass",
                "midi": "0",
                "inst": "Synth_Bass_1"
            },
            {
                "type": "seque",
                "midi": "1",
                "inst": "Lead_1_square"
            },
            {
                "type": "pad",
                "midi": "2",
                "inst": "Pad_3_polysynth"
            }
        ]
    }
    ```

+ MEMO: シンコペーション記述方法？