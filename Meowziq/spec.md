# MeowziQ 楽曲データ記述仕様 ver 1.0.0 日本語版

---
## 共通事項
+ 楽曲データは JSON ファイルで提供されます
+ データの記述について
    + '[ ]' で区切られた範囲を1小節とみなします 
    + '|' で区切られた範囲を1拍とみなします
    + 現時点では4/4拍子の楽曲にしか対応しません

---
## 記述フォーマット
+ json で記述します [※参考](https://lab.syncer.jp/Tool/JSON-Viewer/)

---
## Pattern 記述仕様
+ 定義のルートを "pattern" とします
+ 楽曲キーに対する度数をローマ数字(I,V文字を使用)で記述します
    ```json
    {
        "pattern": [
            {
                "name": "intro",
                "data": "[I | | | ][IV| | | ][I| | | ][IV| | | ]"
            },
            {
                "name": "verse1",
                "data": "[I | | | ][VI| | | ][VI| | | ][VII| | | ]"
            },
            {
                "name": "chorus1",
                "data": "[IV | | | ][IV| | | ][V| | | ][VII| | | ]"
            }
        ]
    }
    ```

+ 度数に対する旋法を指定する場合にはコロンの後に記述します
    ```
    "[I:Dor| | | ][VI:Mix| | | ][VI| | | ][VII| | | ]"
    ```
+ 1小節内では度数の指定は必須です  
    ```
    NG: "[I| | | ][ | | | ][ | | | ][ | | | ]"
    OK: "[I| | | ][I| | | ][I| | | ][I| | | ]"
    ```
+ 度数指定がない場合 | と |、] の間に半角空白が必要です  
+ 度数の記述について
    |記述|Lyd|Ion|Mix|Dor|Aeo|Phr|Loc|
    |:--|:--|:--|:--|:--|:--|:--|:--|
    |I  |1 |1 |1 |1 |1 |1 |1 |
    |II |2 |2 |2 |2 |2 |b2|b2|
    |III|3 |3 |3 |b3|b3|b3|b3|
    |IV |#4|4 |4 |4 |4 |4 |4 |
    |V  |5 |5 |5 |5 |5 |5 |b5|
    |VI |6 |6 |6 |6 |b6|b6|b6|
    |VII|7 |7 |b7|b7|b7|b7|b7|
+ 旋法の記述について
    |旋法|記述|スケール|
    |:--|:--|:--|
    |リディアン|Lyd|1, 2, 3, #4, 5, 6, 7|
    |イオニアン|Ion|1, 2, 3, 4, 5, 6, 7|
    |ミクソリディアン|Mix|1, 2, 3, 4, 5, 6, b7|
    |ドリアン|Dor|1, 2, b3, 4, 5, 6, b7|
    |エオリアン|Aeo|1, 2, b3, 4, 5, b6, b7|
    |フリジアン|Phr|1, b2, b3, 4, 5, b6, b7|
    |ロクリアン|Loc|1, b2, b3, 4, b5, b6, b7|

---
## Song 記述仕様
+ 定義のルートを "song" とします
+ 楽曲の記述例
    ```json
    {
        "song": {
            "name": "song-demo",
            "tempo": "120",
            "key": "C",
            "mode": "Aeo",
            "pattern": [
                "intro",
                "verse1",
                "verse1",
                "chorus1",
                "chorus1",
                "outro"
            ]
        }
    }
    ```

※ Pattern の name 要素と Song の pattern 要素は一致する必要があります

---
## Phrase 記述仕様
+ 定義のルートを "phrase" とします
+ パターンの記述例
    ```json
    {
        "phrase": [
            {
                "type": "drum",
                "name": "verse1",
                "data": {
                    "inst": [
                        "Crash_Cymbal_1",
                        "Closed_Hi_hat",
                        "Open_Hi_hat",
                        "Electric_Snare",
                        "Electric_Bass_Drum"
                    ],
                    "note": [
                        "[----|----|----|----][----|----|----|----][----|----|----|----][----|----|----|--x-]",
                        "[x-x-|x-x-|x-x-|x---][x-x-|x-x-|x-x-|x---][xxxx|xxxx|xxxx|xx--][xxxx|xxxx|xxxx|xx--]",
                        "[----|----|----|--x-][----|----|----|--x-][----|----|----|--x-][----|----|----|--x-]",
                        "[----|x---|----|x---][----|x---|----|x---][----|x---|----|x---][----|x---|----|x---]",
                        "[x---|---x|x---|----][x---|---x|x---|----][x---|---x|x---|----][x---|---x|x---|----]"
                    ]
                }
            },
            {
                "type": "bass",
                "name": "verse1",
                "note": "[1-1-|3-3-|5-5-|7-7-][1-1-|3-3-|5-5-|7-7-][1-11|3-33|5-55|3-33][1-11|3-33|5-55|7-77]"
            },
            {
                "type": "pad",
                "name": "verse1",
                "data": {
                    "note": [
                        "[1>>>|>>--|----|----][1111|----|----|----][1>>>|>>--|----|----][1111|----|----|----]",
                        "[3>>>|>>--|----|----][----|----|----|----][3>>>|>>--|----|----][----|----|----|----]",
                        "[5>>>|>>--|----|----][5555|----|----|----][5>>>|>>--|----|----][5555|----|----|----]"
                    ]
                }
            },
            {
                "type": "seque",
                "name": "verse1"
            },
        ]
    }
    ```

---
## Player 記述仕様
+ 定義のルートを "player" とします
+ Player の記述例
    ```json
    {
        "player": [
            {
                "type": "drum",
                "midi": "9"
            },
            {
                "type": "bass",
                "midi": "0",
                "inst": "Synth_Bass_1"
            },
            {
                "type": "seque",
                "midi": "1",
                "inst": "Lead_1_square"
            },
            {
                "type": "pad",
                "midi": "2",
                "inst": "Pad_3_polysynth"
            }
        ]
    }
    ```

+ MEMO: シンコペーション記述方法？